<app-header></app-header>

<section>
    <div class="form-container">
        <h1>Formulario de Cliente</h1>
        <form (ngSubmit)="handleSubmit()">

            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" name="nombre" placeholder="Ingrese su nombre" [(ngModel)]="formNew.nombre"
                required #nombre="ngModel">
            @if (nombre.invalid && nombre.touched) {
                <p class="error">* El nombre es obligatorio</p>
            }

            <label for="apellido">Apellido</label>
            <input type="text" id="apellido" name="apellido" placeholder="Ingrese su apellido"
                [(ngModel)]="formNew.apellido" required #apellido="ngModel">
            @if (apellido.invalid && apellido.touched) {
                <p class="error">* El apellido es obligatorio</p>
            }

            <label for="telefono">Teléfono</label>
            <input type="number" id="telefono" name="telefono" placeholder="Ingrese su teléfono"
                [(ngModel)]="formNew.telefono" required #telefono="ngModel">
            @if (telefono.invalid && telefono.touched) {
                <p class="error">* El teléfono es obligatorio</p>
            }

            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="Ingrese su email" [(ngModel)]="formNew.email"
                required #email="ngModel">
            @if (email.invalid && email.touched) {
                <p class="error">* El email es obligatorio</p>
            }

            <label for="mensaje">Mensaje</label>
            <textarea id="mensaje" name="mensaje" placeholder="Ingrese su mensaje" rows="4"
                [(ngModel)]="formNew.mensaje" required #mensaje="ngModel"></textarea>
            @if (mensaje.invalid && mensaje.touched) {
                <p class="error">* El mensaje es obligatorio</p>
            }

            <h2>Información de la propiedad</h2>

            <label for="operacion">Operación</label>
            <select id="operacion" name="operacion" [(ngModel)]="formNew.operacion" required #operacion="ngModel">
                <option value="compra">Compra</option>
                <option value="venta">Venta</option>
            </select>
            @if (operacion.invalid && operacion.touched) {
                <p class="error">* La operación es obligatoria</p>
            }

            <label for="presupuesto">Presupuesto</label>
            <input type="number" id="presupuesto" name="presupuesto" placeholder="Ingrese su presupuesto"
                [(ngModel)]="formNew.presupuesto" required #presupuesto="ngModel">
            @if (presupuesto.invalid && presupuesto.touched) {
                <p class="error">* El presupuesto es obligatorio</p>
            }

            <h2>Tipo de contacto</h2>

            <label for="fecha">Fecha</label>
            <input type="date" id="fecha" name="fecha" [(ngModel)]="formNew.fecha" [min]="hoy"
                (change)="isWeekend(formNew.fecha) && (formNew.fecha = '')" required #fecha="ngModel">
            @if (fecha.invalid && fecha.touched) {
                <p class="error">* La fecha es obligatoria</p>
            }

            <label for="hora">Hora</label>
            <input type="time" id="hora" name="hora" [(ngModel)]="formNew.hora" min="07:00" max="18:00"
                (change)="!isValidHour() && (formNew.hora = '')" required #hora="ngModel">
            @if (hora.invalid && hora.touched) {
                <p class="error">* La hora es obligatoria</p>
            }

            <label for="forma_de_contacto">Forma de Contacto</label>
            <select id="forma_de_contacto" name="forma_de_contacto" [(ngModel)]="formNew.forma_de_contacto" required #forma_de_contacto="ngModel">
                <option value="telefono">Teléfono</option>
                <option value="email">Email</option>
                <option value="whatsapp">WhatsApp</option>
            </select>
            @if (forma_de_contacto.invalid && forma_de_contacto.touched) {
                <p class="error">* La forma de contacto es obligatoria</p>
            }

            <button type="submit">Enviar</button>
        </form>
    </div>
</section>
